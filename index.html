<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Curricular Medicina UBO</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    .semester {
      margin-bottom: 20px;
    }
    .semester h2 {
      margin-bottom: 10px;
      color: #333;
    }
    .courses {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
    }
    .course {
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      transition: transform .2s, box-shadow .2s;
      color: #333;
      user-select: none;
    }
    .course.locked {
      opacity: 0.4;
      cursor: default;
      color: #777;
    }
    .course.passed {
      text-decoration: line-through;
      opacity: 0.6;
    }
    .course:not(.locked):hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>Malla Curricular Medicina UBO</h1>
  <div id="malla"></div>

  <script>
    // Paleta de colores pastel por semestre
    const palette = [
      '#AEDFF7', '#FBE7C6', '#D4F4DD', '#F7C6D6',
      '#FFF2AE', '#C7CEEA', '#FFDAC1', '#E2F0CB',
      '#FFB3BA', '#B28DFF', '#C3FDB8', '#D9D0EC',
      '#FFC9DE', '#C2E7DA'
    ];

    // Definición de la malla y prerequisitos por curso
    const malla = [
      { semestre: 1, cursos: [
        { name: 'Bases Químicas de la Medicina', prereqs: [] },
        { name: 'Física Médica', prereqs: [] },
        { name: 'Biomatemáticas', prereqs: [] },
        { name: 'Introducción a la medicina e intervención básica en emergencias', prereqs: [] },
        { name: 'Inglés I', prereqs: [] },
        { name: 'Habilidades académicas I', prereqs: [] }
      ]},
      { semestre: 2, cursos: [
        { name: 'Biología celular y molecular médica', prereqs: ['Bases Químicas de la Medicina'] },
        { name: 'Morfología Integrada I', prereqs: ['Física Médica'] },
        { name: 'Salud pública y estadística aplicada a la medicina', prereqs: ['Biomatemáticas'] },
        { name: 'Elementos clínicos básicos', prereqs: ['Introducción a la medicina e intervención básica en emergencias'] },
        { name: 'Inglés II', prereqs: ['Inglés I'] },
        { name: 'Habilidades académicas II', prereqs: ['Habilidades académicas I'] }
      ]},
      { semestre: 3, cursos: [
        { name: 'Bioquímica médica y genética clínica', prereqs: ['Biología celular y molecular médica'] },
        { name: 'Morfología integrada II', prereqs: ['Morfología Integrada I'] },
        { name: 'Electivo I', prereqs: [] },
        { name: 'Sistema nacional de salud I', prereqs: [] },
        { name: 'Integración clínica I', prereqs: ['Elementos clínicos básicos'] },
        { name: 'Inglés III', prereqs: ['Inglés II'] }
      ]},
      { semestre: 4, cursos: [
        { name: 'Morfología integrada III', prereqs: ['Morfología integrada II'] },
        { name: 'Sistema nacional de salud II', prereqs: ['Sistema nacional de salud I'] },
        { name: 'Metodología de la investigación y medicina basada en la evidencia', prereqs: ['Salud pública y estadística aplicada a la medicina'] },
        { name: 'Bases y mecanismos de la salud y enfermedad I', prereqs: ['Bioquímica médica y genética clínica','Morfología integrada II'] },
        { name: 'Integración clínica II', prereqs: ['Integración clínica I'] },
        { name: 'Inglés IV', prereqs: ['Inglés III'] }
      ]},
      { semestre: 5, cursos: [
        { name: 'Farmacología general', prereqs: ['Morfología integrada III'] },
        { name: 'Sistema nacional de salud III', prereqs: ['Sistema nacional de salud II','Metodología de la investigación y medicina basada en la evidencia'] },
        { name: 'Diagnóstico clínico I', prereqs: ['Bases y mecanismos de la salud y enfermedad I'] },
        { name: 'Bases y mecanismos de la salud y enfermedad II', prereqs: ['Bases y mecanismos de la salud y enfermedad I'] },
        { name: 'Práctica integrada en medicina I', prereqs: ['Integración clínica II'] },
        { name: 'Ética y ciudadanía', prereqs: [] }
      ]},
      { semestre: 6, cursos: [
        { name: 'Farmacología clínica', prereqs: ['Farmacología general'] },
        { name: 'Sistema nacional de salud IV', prereqs: ['Sistema nacional de salud III'] },
        { name: 'Diagnóstico clínico II', prereqs: ['Diagnóstico clínico I'] },
        { name: 'Métodos diagnósticos', prereqs: ['Diagnóstico clínico II'] },
        { name: 'Bases y mecanismos de la salud y enfermedad III', prereqs: ['Bases y mecanismos de la salud y enfermedad II'] },
        { name: 'Medicina interna I', prereqs: ['Diagnóstico clínico I','Bases y mecanismos de la salud y enfermedad II'] },
        { name: 'Práctica integrada en medicina II', prereqs: ['Práctica integrada en medicina I'] }
      ]},
      { semestre: 7, cursos: [
        { name: 'Bioética clínica y antropología médica', prereqs: [] },
        { name: 'Sistema nacional de salud V', prereqs: ['Sistema nacional de salud IV'] },
        { name: 'Medicina legal', prereqs: [] },
        { name: 'Medicina interna II', prereqs: ['Medicina interna I','Bases y mecanismos de la salud y enfermedad III'] },
        { name: 'Práctica integrada en medicina III', prereqs: ['Práctica integrada en medicina II'] }
      ]},
      { semestre: 8, cursos: [
        { name: 'Oncología', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Nutrición', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Psicología', prereqs: [] },
        { name: 'Neurología', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Práctica integrada en medicina IV', prereqs: ['Práctica integrada en medicina III'] },
        { name: 'Responsabilidad social universitaria', prereqs: ['Ética y ciudadanía'] }
      ]},
      { semestre: 9, cursos: [
        { name: 'Gestión', prereqs: ['Sistema nacional de salud V'] },
        { name: 'Ginecología y obstetricia', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Ortopedia y traumatología', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Fisiatría', prereqs: ['Psicología','Métodos diagnósticos','Medicina interna II'] },
        { name: 'Cirugía', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Práctica integrada en medicina V', prereqs: ['Práctica integrada en medicina IV'] }
      ]},
      { semestre: 10, cursos: [
        { name: 'Pediatría', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Oftalmología/Otorrinolaringología/Dermatología', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Medicina de urgencias', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Psiquiatría', prereqs: ['Métodos diagnósticos','Medicina interna II'] },
        { name: 'Práctica integrada en medicina VI', prereqs: ['Práctica integrada en medicina V'] },
        { name: 'Electivo II', prereqs: [] }
      ]},
      { semestre: 11, cursos: [
        { name: 'Internado I', prereqs: ['Pediatría','Oftalmología/Otorrinolaringología/Dermatología','Medicina de urgencias','Psiquiatría','Práctica integrada en medicina VI','Electivo II'] }
      ]},
      { semestre: 12, cursos: [
        { name: 'Internado II', prereqs: ['Internado I'] }
      ]},
      { semestre: 13, cursos: [
        { name: 'Internado III', prereqs: ['Internado II'] }
      ]},
      { semestre: 14, cursos: [
        { name: 'Internado IV', prereqs: ['Internado III'] }
      ]}
    ];

    // Estado guardado en localStorage
    const estado = JSON.parse(localStorage.getItem('mallaEstado')) || {};
    function saveEstado() {
      localStorage.setItem('mallaEstado', JSON.stringify(estado));
    }

    // Verifica si un curso está desbloqueado
    function canAccess(course) {
      return course.prereqs.every(pr => estado[pr]);
    }

    // Renderiza la malla completa
    function render() {
      const container = document.getElementById('malla');
      container.innerHTML = '';

      malla.forEach((sem, idx) => {
        const semDiv = document.createElement('div');
        semDiv.classList.add('semester');
        semDiv.innerHTML = `<h2>Semestre ${sem.semestre}</h2>`;

        const coursesDiv = document.createElement('div');
        coursesDiv.classList.add('courses');

        sem.cursos.forEach(course => {
          const cDiv = document.createElement('div');
          cDiv.textContent = course.name;
          cDiv.classList.add('course');
          cDiv.style.backgroundColor = palette[idx % palette.length];

          if (estado[course.name]) cDiv.classList.add('passed');
          if (!canAccess(course)) {
            cDiv.classList.add('locked');
          } else {
            cDiv.addEventListener('click', () => {
              estado[course.name] = !estado[course.name];
              saveEstado();
              render();
            });
          }

          coursesDiv.appendChild(cDiv);
        });

        semDiv.appendChild(coursesDiv);
        container.appendChild(semDiv);
      });
    }

    // Inicializa render
    render();
  </script>
</body>
</html>
